{% from 'bootstrap5/utils.html' import render_icon %}

{% macro render_nav_item(endpoint, text, _badge='', _use_li=False) %}
    {% set active = True if request.endpoint and request.endpoint == endpoint else False %}
    {% if _use_li %}<li class="nav-item">{% endif %}
    <a class="{% if not _use_li %}nav-item {% endif %}nav-link{% if active %} active" aria-current="page{% endif %}"
       href="{{ url_for(endpoint, **kwargs) }}">
        {{ text }} {% if _badge %}<span class="badge badge-light">{{ _badge }}</span>{% endif %}
    </a>
    {% if _use_li %}</li>{% endif %}
{% endmacro %}


{% macro render_breadcrumb_item(endpoint, text) %}
    {% set active = True if request.endpoint and request.endpoint == endpoint else False %}
    <li class="breadcrumb-item{% if active %} active" aria-current="page{% endif %}">
        {% if active %}
            {{ text }}
        {% else %}
        <a href="{{ url_for(endpoint, **kwargs) }}">{{ text }}</a>
        {% endif %}
    </li>
{% endmacro %}


{% macro render_colormode_item(icon='', _use_li=True) %}
    {%- if config.BOOTSTRAP_BOOTSWATCH_THEME is none -%}
    {% if _use_li %}<li class="nav-item dropdown">{% endif %}
                  <button class="btn btn-link nav-link py-2 px-0 px-lg-2 dropdown-toggle d-flex align-items-center"
                    id="bd-theme"
                    type="button"
                    aria-expanded="false"
                    data-bs-toggle="dropdown"
                    data-bs-display="static"
                    aria-label="Toggle theme (auto)">
                    {{ render_icon('circle-half', title='my-1 theme-icon-active') }}
                    <span class="d-lg-none ms-2" id="bd-theme-text">Toggle theme</span>
                  </button>
                  <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="bd-theme-text">
                    <li>
                      <button type="button" class="dropdown-item d-flex align-items-center" data-bs-theme-value="light" aria-pressed="false">
                        {{ render_icon('sun-fill', title='me-2 opacity-50 theme-icon') }}
                        Light
                        {{ render_icon('check2', title='ms-auto d-none') }}
                      </button>
                    </li>
                    <li>
                      <button type="button" class="dropdown-item d-flex align-items-center" data-bs-theme-value="dark" aria-pressed="false">
                        {{ render_icon('moon-stars-fill', title='me-2 opacity-50 theme-icon') }}
                        Dark
                        {{ render_icon('check2', title='ms-auto d-none') }}
                      </button>
                    </li>
                    <li>
                      <button type="button" class="dropdown-item d-flex align-items-center active" data-bs-theme-value="auto" aria-pressed="true">
                        {{ render_icon('circle-half', title='me-2 opacity-50 theme-icon') }}
                        Auto
                        {{ render_icon('check2', title='ms-auto d-none') }}
                      </button>
                    </li>
                  </ul>
    {% if _use_li %}</li>{% endif %}
    {%- endif -%}
{% endmacro %}
