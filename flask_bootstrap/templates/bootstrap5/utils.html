{% extends 'base/utils.html' %}

{% macro render_messages(messages=None, container=False, transform={
     'critical': 'danger',
     'error': 'danger',
     'info': 'info',
     'warning': 'warning',
     'debug': 'primary',
     'notset': 'primary',
     'message': 'primary',
    }, default_category=config.BOOTSTRAP_MSG_CATEGORY, dismissible=False, dismiss_animate=False) -%}
   
    {% with messages = messages or get_flashed_messages(with_categories=True) -%}
    {% if messages -%} {# don't output anything if there are no messages #}

    {% if container -%}
    <!-- begin message block -->
    <div class="container flashed-messages">
        <div class="row">
            <div class="col-md-12">
    {% endif -%}

    {% for cat, msg in messages %}
        <div class="alert alert-{{ transform.get(cat.lower(), cat or default_category) }}{% if dismissible %} alert-dismissible {% if dismiss_animate %}fade show{% endif %}{% endif %}" role="alert">
    {% if dismissible %}
        <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>{% endif %}
           {{ msg }}
        </div>
    {%- endfor -%}

    {% if container %}
            </div>
        </div>
    </div>
    <!-- end message block -->
    {% endif -%}

    {% endif -%}
    {% endwith -%}
{% endmacro -%}


{% macro render_image(src, alt, fluid=False, corner=None, text_align=None,
    float=None, mx_auto=False) -%}
    {%- if text_align -%}
    <div class="text-{{ text_align }}">
    {%- endif -%}
    <img src="{{ src }}" alt="{{ alt }}"
    {%- if fluid or float or mx_auto or corner %} class="
        {%- if fluid %} img-fluid{% endif -%}
        {%- if float %} float-{{ float }}{% endif -%}
        {%- if mx_auto %} mx-auto d-block{% endif -%}
        {%- if corner == 'thumbnail' %} img-thumbnail
        {%- elif corner == 'rounded' %} rounded{% endif -%}"
    {%- endif %}>
    {%- if text_align -%}
    </div>
    {%- endif -%}
{%- endmacro -%}

{% macro render_figure(src, alt, caption, corner=None, text_align=None) -%}
    <figure class="figure">
    <img src="{{ src }}" alt="{{ alt }}" class="figure-img img-fluid
        {%- if corner == 'thumbnail' %} img-thumbnail
        {%- elif corner == 'rounded' %} rounded{% endif -%}">
    <figcaption class="figure-caption{% if text_align %} text-{{ text_align }}{% endif %}">{{ caption }}</figcaption>
    </figure>
{%- endmacro -%}
