{% extends 'base/utils.html' %}

{% macro render_messages(messages=None, container=False, transform={
     'critical': 'danger',
     'error': 'danger',
     'info': 'info',
     'warning': 'warning',
     'debug': 'primary',
     'notset': 'primary',
     'message': 'primary',
    }, default_category=config.BOOTSTRAP_MSG_CATEGORY, dismissible=False, dismiss_animate=False) -%}
   
    {% with messages = messages or get_flashed_messages(with_categories=True) -%}
    {% if messages -%} {# don't output anything if there are no messages #}

    {% if container -%}
    <!-- begin message block -->
    <div class="container flashed-messages">
        <div class="row">
            <div class="col-md-12">
    {% endif -%}

    {% for cat, msg in messages %}
        <div class="alert alert-{{ transform.get(cat.lower(), cat or default_category) }}{% if dismissible %} alert-dismissible {% if dismiss_animate %}fade show{% endif %}{% endif %}" role="alert">
    {% if dismissible %}
        <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>{% endif %}
           {{ msg }}
        </div>
    {%- endfor -%}

    {% if container %}
            </div>
        </div>
    </div>
    <!-- end message block -->
    {% endif -%}

    {% endif -%}
    {% endwith -%}
{% endmacro -%}

<!-- As foreground such as text-bg-warning also set the background, there is no
default value in macro declaration below for background. See also
https://getbootstrap.com/docs/5.3/helpers/color-background/ -->
{% macro render_progress(aria_valuenow=0, aria_valuemin=0, aria_valuemax=100,
                         aria_label='', height=None, label=None,
                         background=None, foreground=None,
                         striped=False, animated=False) -%}
<div class="progress" role="progressbar" aria-label="{{ aria_label }}" aria-valuenow="{{ aria_valuenow }}" aria-valuemin="{{ aria_valuemin }}" aria-valuemax="{{ aria_valuemax }}" {% if height %}style="height: {{ height }}"{% endif %}>
  <div class="progress-bar{% if striped %} progress-bar-striped{% if animated %} progress-bar-animated{% endif %}{% endif %}{% if background %} bg-{{ background }}{% endif %}{% if foreground %} {{ foreground }}{% endif %}" style="width: {{ aria_valuenow }}%">{% if label %}{{ label }}{% endif %}</div>
</div>
{%- endmacro %}
